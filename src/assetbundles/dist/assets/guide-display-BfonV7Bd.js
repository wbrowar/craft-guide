import{r as h,n as u,t as m,h as y,g as S,p as b,s as v,k as o,D as a,l as w,c as C,i as I}from"./console-3gNWUiwH.js";import{a as E,P as $}from"./types-BZdEkL9Y.js";var G=Object.defineProperty,O=Object.getOwnPropertyDescriptor,f=(e,t,i,l)=>{for(var s=l>1?void 0:l?O(t,i):t,d=e.length-1,n;d>=0;d--)(n=e[d])&&(s=(l?n(t,i,s):n(s))||s);return l&&s&&G(t,i,s),s};let _=class extends y{constructor(){super(...arguments),this.tMessages={},this._guides=[],this._selectedGuide=void 0}_selectGuide(e){this._selectedGuide=this._guides.find(t=>t.slug===e)}connectedCallback(){super.connectedCallback();const e=this.querySelectorAll(".guide"),t=[];[...e].forEach(i=>{i.dataset.guideSlug&&t.push(i.dataset.guideSlug)}),t.forEach(i=>{const l=S.find(s=>s.slug===i);l&&this._guides.push(l)}),this._guides.length&&(this._selectedGuide=this._guides[0]),b&&v.enableGuideJavascript&&t.forEach(i=>{var l,s;try{(s=(l=window.guideCallback)[i])==null||s.call(l)}catch{window.Craft.cp.displayError(this.tMessages.guideJsCallbackError.replace("[slug]",i))}})}render(){var i,l,s;const e=o`
      <nav>
        <h2>${this.tMessages.guides}</h2>
        <ul>
          ${(i=this._guides)==null?void 0:i.map(d=>{var n;return o`<li class="${((n=this._selectedGuide)==null?void 0:n.slug)===d.slug?"selected":a}">
              <button type="button" @click="${()=>this._selectGuide(d.slug)}">${d.title}</button>
            </li>`})}
        </ul>
      </nav>
    `,t=[];return o`
      ${this._guides&&((l=this._guides)==null?void 0:l.length)>1||t.length?o`
            <aside>
              ${this._guides&&((s=this._guides)==null?void 0:s.length)>1?e:a}
              ${t.length?t.map(d=>d):a}
            </aside>
          `:a}
    `}willUpdate(e){e.has("_selectedGuide")&&this.querySelectorAll(".guide").forEach(i=>{var l;i.dataset.guideSlug===((l=this._selectedGuide)==null?void 0:l.slug)?i.classList.remove("visually-hidden"):i.classList.add("visually-hidden")})}createRenderRoot(){return this}};f([u({attribute:"t-messages",type:Object})],_.prototype,"tMessages",2);f([h()],_.prototype,"_guides",2);f([h()],_.prototype,"_selectedGuide",2);_=f([m("guide-display")],_);var P=Object.defineProperty,k=Object.getOwnPropertyDescriptor,g=(e,t,i,l)=>{for(var s=l>1?void 0:l?k(t,i):t,d=e.length-1,n;d>=0;d--)(n=e[d])&&(s=(l?n(t,i,s):n(s))||s);return l&&s&&P(t,i,s),s};let c=class extends y{constructor(){super(...arguments),this.docs=!1,this.elementId=0,this.groupHandle="",this.slug="",this.tMessages={},this._isValid=!1}_onButtonClick(){var e;this._isValid?(w("welllllll",this.elementId,this.groupHandle),C({docs:this.docs,elementId:this.elementId,groupHandle:this.groupHandle,slug:this.slug})):window.Craft.cp.displayError((e=this.tMessages.guideSlideoutSlugError)==null?void 0:e.replace("[slug]",this.slug))}connectedCallback(){super.connectedCallback(),this.docs?this._isValid=!0:(this._isValid=!0,this.slug.split("|").forEach(t=>{this._isValid&&S.find(i=>i.slug===t)!==void 0?this._isValid=!0:this._isValid=!1}));const e=this.querySelector("button");e==null||e.addEventListener("click",()=>this._onButtonClick())}disconnectedCallback(){const e=this.querySelector("button");e==null||e.removeEventListener("click",()=>this._onButtonClick()),super.disconnectedCallback()}createRenderRoot(){return this}};g([u({attribute:"docs-page",type:Boolean})],c.prototype,"docs",2);g([u({attribute:"element-id",type:Number})],c.prototype,"elementId",2);g([u({attribute:"group-handle",type:String})],c.prototype,"groupHandle",2);g([u({attribute:"page-slug",type:String})],c.prototype,"slug",2);g([u({attribute:"t-messages",type:Object})],c.prototype,"tMessages",2);g([h()],c.prototype,"_isValid",2);c=g([m("guide-slideout-button")],c);var j=Object.defineProperty,M=Object.getOwnPropertyDescriptor,p=(e,t,i,l)=>{for(var s=l>1?void 0:l?M(t,i):t,d=e.length-1,n;d>=0;d--)(n=e[d])&&(s=(l?n(t,i,s):n(s))||s);return l&&s&&j(t,i,s),s};let r=class extends y{constructor(){super(...arguments),this.groupId="",this.placementId=-1,this.tMessages={},this._guideIdSelect=null,this._guideSelected=!1,this._showSettings=!1}async _onGuideIdSelected(e){var t;if(!this._guideSelected&&e!=="__none__"){const i={access:E.All,group:$.UiElement,groupId:this.groupId,guideId:parseInt(e)};this.placementId&&(i.id=this.placementId),await((t=window.Craft)==null?void 0:t.postActionRequest("guide/placement/save-placement",{data:i},(l,s)=>{s==="success"&&(window.Craft.cp.displayNotice(this.tMessages.placementSaveSuccess),this._guideSelected=!0)}))}}_onSettingsButtonClicked(){this._showSettings=!this._showSettings}connectedCallback(){var e;super.connectedCallback(),this._guideIdSelect=this.querySelector('guide-ui-element select[name="guideId"]'),this._guideIdSelect&&this._guideIdSelect.addEventListener("change",()=>{var t;this._onGuideIdSelected((t=this._guideIdSelect)==null?void 0:t.value)}),(e=this.querySelector("button.settings"))==null||e.addEventListener("click",()=>this._onSettingsButtonClicked())}disconnectedCallback(){var e;(e=this.querySelector("button.settings"))==null||e.removeEventListener("click",()=>this._onSettingsButtonClicked()),super.disconnectedCallback()}render(){return o`
      ${this._guideSelected?a:o`<div class="settings"><slot name="settings-button"></slot></div>`}
      ${this._showSettings&&!this._guideSelected?o`<slot name="settings-display"></slot>`:a}
      ${this._showSettings&&this._guideSelected?o`<slot name="guide-selected"></slot>`:a}
      ${this._showSettings?a:o`<slot name="guide-display"></slot>`}
    `}};r.styles=I`
    .settings {
      display: flex;
      justify-content: end;
      margin-block-end: var(--m);
    }
  `;p([u({attribute:"group-id",type:String})],r.prototype,"groupId",2);p([u({attribute:"placement-id",type:Number})],r.prototype,"placementId",2);p([u({attribute:"t-messages",type:Object})],r.prototype,"tMessages",2);p([h()],r.prototype,"_guideIdSelect",2);p([h()],r.prototype,"_guideSelected",2);p([h()],r.prototype,"_showSettings",2);r=p([m("guide-ui-element")],r);
